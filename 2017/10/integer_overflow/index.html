<!DOCTYPE html>
<html><head>
<title>整數溢位 Integer Overflow</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="從電腦的數字系統開始，討論電腦如何儲存整數，並探討為何會產生整數溢位">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">











<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-106499565-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


<link type="text/css" rel="stylesheet" href="https://idontwannarock.github.io/tech_blog/vendor/css/bootstrap.min.css">


  






<link rel="stylesheet" href="https://idontwannarock.github.io/tech_blog/scss/journal.min.3f72a5fc8f5b5dd732a4b476aced0eece2156958d9d414316494ddb10593ddf7.css" integrity="sha256-P3Kl/I9bXdcypLR2rO0O7OIVaVjZ1BQxZJTdsQWT3fc=" media="screen">



<link rel="stylesheet" href="https://idontwannarock.github.io/tech_blog/scss/dark-mode.min.f7c2efa7183435a6bd1842f91c541481c7a5137b5991629a870f24e4a516ad4b.css" integrity="sha256-98Lvpxg0Naa9GEL5HFQUgcelE3tZkWKahw8k5KUWrUs=" media="screen">


<script src="https://idontwannarock.github.io/tech_blog/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="https://idontwannarock.github.io/tech_blog/js/toc.js"></script>







<script src="https://cdn.jsdelivr.net/npm/vue-disqus@3/dist/vue-disqus.js"></script>








</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://idontwannarock.github.io/tech_blog/">
    
        <div class="nav-title">
            Howard Tech Note
        </div>
        
        <div class="nav-subtitle">
            Share * Record * Program
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="https://idontwannarock.github.io/tech_blog/posts">
                Archive
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="https://idontwannarock.github.io/tech_blog/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="https://idontwannarock.github.io/tech_blog/tags">
                Tags
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="https://idontwannarock.github.io/tech_blog/works">
                My Works
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="https://idontwannarock.github.io/tech_blog/about">
                About
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	This website by Howard Wang is licensed under a Creative Common Attribution-ShareAlike 4.0 International License.
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%95%b8%e5%ad%97%e7%b3%bb%e7%b5%b1" onclick="onNavClick(`#數字系統-nav`)" id="數字系統-nav">
									數字系統
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%9b%bb%e8%85%a6%e5%9f%ba%e6%9c%ac%e9%81%8b%e7%ae%97%e6%96%b9%e5%bc%8f" onclick="onNavClick(`#電腦基本運算方式-nav`)" id="電腦基本運算方式-nav">
									電腦基本運算方式
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%b3%87%e6%96%99%e5%9e%8b%e6%85%8b" onclick="onNavClick(`#資料型態-nav`)" id="資料型態-nav">
									資料型態
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%95%b4%e6%95%b8%e5%84%b2%e5%ad%98%e6%96%b9%e5%bc%8f" onclick="onNavClick(`#整數儲存方式-nav`)" id="整數儲存方式-nav">
									整數儲存方式
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#1s-%e8%a3%9c%e6%95%b8" onclick="onNavClick(`#1s-補數-nav`)" id="1s-補數-nav">
									1’s 補數
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2s-%e8%a3%9c%e6%95%b8" onclick="onNavClick(`#2s-補數-nav`)" id="2s-補數-nav">
									2’s 補數
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%95%b4%e6%95%b8%e6%ba%a2%e4%bd%8d-integer-overflow" onclick="onNavClick(`#整數溢位-integer-overflow-nav`)" id="整數溢位-integer-overflow-nav">
									整數溢位 Integer Overflow
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="https://idontwannarock.github.io/tech_blog/posts">
                    Archive
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="https://idontwannarock.github.io/tech_blog/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="https://idontwannarock.github.io/tech_blog/tags">
                    Tags
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="https://idontwannarock.github.io/tech_blog/works">
                    My Works
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="https://idontwannarock.github.io/tech_blog/about">
                    About
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%95%b8%e5%ad%97%e7%b3%bb%e7%b5%b1" onclick="onNavClick(`#數字系統-nav`)" id="數字系統-nav">
									數字系統
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%9b%bb%e8%85%a6%e5%9f%ba%e6%9c%ac%e9%81%8b%e7%ae%97%e6%96%b9%e5%bc%8f" onclick="onNavClick(`#電腦基本運算方式-nav`)" id="電腦基本運算方式-nav">
									電腦基本運算方式
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%b3%87%e6%96%99%e5%9e%8b%e6%85%8b" onclick="onNavClick(`#資料型態-nav`)" id="資料型態-nav">
									資料型態
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%95%b4%e6%95%b8%e5%84%b2%e5%ad%98%e6%96%b9%e5%bc%8f" onclick="onNavClick(`#整數儲存方式-nav`)" id="整數儲存方式-nav">
									整數儲存方式
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#1s-%e8%a3%9c%e6%95%b8" onclick="onNavClick(`#1s-補數-nav`)" id="1s-補數-nav">
									1’s 補數
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2s-%e8%a3%9c%e6%95%b8" onclick="onNavClick(`#2s-補數-nav`)" id="2s-補數-nav">
									2’s 補數
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%95%b4%e6%95%b8%e6%ba%a2%e4%bd%8d-integer-overflow" onclick="onNavClick(`#整數溢位-integer-overflow-nav`)" id="整數溢位-integer-overflow-nav">
									整數溢位 Integer Overflow
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://idontwannarock.github.io/tech_blog/">
            Howard Tech Note
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://idontwannarock.github.io/tech_blog/">
        <div class="single-column-header-title">Howard Tech Note</div>
        
        <div class="single-column-header-subtitle">Share * Record * Program</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://res.cloudinary.com/dcvgho2zc/image/upload/v1568961579/binary-number_nctg0k.png')"
                    
                
            >
                <div class="post-title">
                    整數溢位 Integer Overflow
                    
                    <div class="post-subtitle">
                        從電腦的數字系統開始，討論電腦如何儲存整數，並探討為何會產生整數溢位
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2017-10-01 07:04
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="https://idontwannarock.github.io/tech_blog/categories/concept">concept</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="https://idontwannarock.github.io/tech_blog/tags/binary">binary</a>
                                &nbsp;
                            
                                <a href="https://idontwannarock.github.io/tech_blog/tags/integer">integer</a>
                                &nbsp;
                            
                                <a href="https://idontwannarock.github.io/tech_blog/tags/overflow">overflow</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <p>這是我查到一些資料後的理解，希望能多一點對整數溢位後為何會正負循環的了解。</p>
<h1 id="數字系統">數字系統</h1>
<p>首先要了解的是數字系統，因為一般電腦是採用二進制 (Binary) 來作數字計算，而不是我們習慣的十進制 (Decimal)。</p>
<p>我們一般人都是用十進制，十進制就是用 <code>0、1、2、3、4、5、6、7、8、9</code> 十個數字來表達，一個位數就有十種狀態，從 0 開始往上累積，超過 9 就進一位。</p>
<p>而二進制是什麼呢？二進制就是用 <code>0、1</code> 兩個數字來表達，一個位數就只有兩種狀態表達，從 0 開始往上累積，超過 1 就進一位。</p>
<p>以十進制來說，<code>13</code> 這個數字其實應該寫成 <code>1*10^1 + 3*10^0</code> 這樣。<code>10^0</code> 是 <code>1</code>，也就是代表個位數，乘以幾就是這個位數累積到幾，超過 <code>9</code> 就進一位到 <code>10^1</code> 這一位，也就是十位數；再累積超過 <code>9</code>，就進位到 <code>10^2</code> 百位數，以此類推。</p>
<p>那二進制怎麼表達呢？例如有一個二進制的數字長這樣 <code>1101</code>，如同十進制，我們可以表達成 <code>1*2^3 + 1*2^2 + 0*2^1 + 1*2^0</code>。這樣公式算完的答案其實就是十進制的 <code>13</code>，大家可以算一下試試看。其實其他如八進制、十六進制也是相同原理，只不過超過十進制的進制系統，因為阿拉伯數字無法在單一位數表達 <code>10</code> 以上的數字大小，所以會配合英文字母 <code>A、B、C、D</code> 等等。</p>
<p>另外複習一下國小（國中？）數學，小數點的部分，以我們常用的十進制來說，小數點後第一位是 <code>10^-1</code>、第二位是 <code>10^-2</code>，以此類推；相對的二進制也是一樣規則，小數點後第一位是 <code>2^-1</code>、第二位是 <code>2^-2</code> 這樣。</p>
<h1 id="電腦基本運算方式">電腦基本運算方式</h1>
<p>前面說到一般電腦是用二進制運算，這是什麼意思？</p>
<p>舉個例子，今天假設一台電腦，我們拉了第一條電線在裡面，一條電線怎麼表達不同的狀態呢？對，就是通電，有通電是一種狀態，沒通電是一種狀態。當然比較實際的作法是透過電壓，高電壓是一種狀態，低電壓是一種狀態，這樣來表達兩種狀態。</p>
<p>因此一條電線就能表達兩種狀態，剛好符合二進制只用 <code>0、1</code> 兩個數字來表達所有數字的狀態，而這樣能表達兩種狀態（1 或 0）的一條電線就是 1 bit。順便講一下因為某些原因，8 bits 被規定為 1 byte。bit 就是我們常聽到的位元，byte 就是我們更常聽到的位元組。</p>
<p>那 1 bit 可以表達兩種狀態，以二進制來說就是可以表達 0 跟 1；那 2 bits 呢？是四種；那 3 bits 呢？是六種？錯，是八種。</p>
<p>我們用列舉的方式說明，3 bits 意思是有三條電線各自有 0 跟 1 兩種狀態，因此我們可以列出有下列八種狀況：</p>
<table>
<thead>
<tr>
<th style="text-align:center">狀況</th>
<th style="text-align:center">第一條電線</th>
<th style="text-align:center">第二條電線</th>
<th style="text-align:center">第三條電線</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">一</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">二</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">三</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">四</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">五</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">六</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">七</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">八</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<p>簡略來說就是其實是有 2*2*2=8，也就是 2<!-- raw HTML omitted -->3<!-- raw HTML omitted --> 種狀況；以此類推，n bit（n 條電線）就有 2<!-- raw HTML omitted -->n<!-- raw HTML omitted --> 種狀況。</p>
<p>那 1 byte 可以表達幾種狀況？</p>
<p>前面說過 1 byte = 1 bit，所以 1 byte 就可以表達 2<!-- raw HTML omitted -->8<!-- raw HTML omitted --> = 256 種狀況。</p>
<p>前面也講過二進制怎麼換算十進制，也就代表了二進制的每一種狀況都對應到一個十進制的數字，至於對應到的是哪一個，就是用前面教過的換算方法換算。</p>
<p>因此，1 byte 可以表達 256 種狀況，每一種狀況剛好表達了一個二進制數字；再以二進制對應十進制來考慮，也就是 1 byte 可以表達從 0  開始，最多到 255 的各種十進制數字。</p>
<h1 id="資料型態">資料型態</h1>
<p>到這邊可能就會有人問，那負數呢？</p>
<p>沒錯，講到這邊我們都只處理了正整數（包括 0），還沒講到負整數。講負整數之前，順便先講一下資料型態。</p>
<p>一般電腦要存這些數字，也是以這樣 1 個 byte、1 個 byte 的存，就想像記憶體或硬碟裡面就是一大堆小格子，每個小格子裡面通常就是 8 條線，也就是 8 bits，因此一個小格子就是 1 byte，也就是一個小格子就能存 256 種不同的狀態，以正整數來說，就是能存 0-255 這個範圍內的任何一個數字。</p>
<p>但 0-255 這樣的範圍很顯然太小了啊，儲存喝一杯可樂、吃一頓麥當勞的價格可能還可以，但要是我去麥當勞想點個六塊炸雞餐台幣 288 元怎麼辦？</p>
<p>對，就只好用兩個小格子 2 bytes 來存啊，兩個 256 加一起總可以了吧？</p>
<p>這句話只對了一半。</p>
<p>的確是要用 2 bytes 來存，但請記住 2 bytes 是有 2<!-- raw HTML omitted -->8<!-- raw HTML omitted -->*2<!-- raw HTML omitted -->8<!-- raw HTML omitted --> = 2<!-- raw HTML omitted -->16<!-- raw HTML omitted --> = 65,536 種狀況，而不是 256+256=512 種狀況唷！就跟 2 bits = 2*2 種狀況一樣，2 bytes 也是 2<!-- raw HTML omitted -->8<!-- raw HTML omitted -->*2<!-- raw HTML omitted -->8<!-- raw HTML omitted --> 種狀況唷！至於有指數的數字相乘則指數相加這件事，請翻數學課本或上網谷哥。</p>
<p>接著，我們已經知道 2 bytes 有 65536 種狀態，以正整數來說就是 2 bytes 就可以存 0-65535 這個範圍內任一整數，但某些狀況下，這個數字可能也不夠大怎麼辦？</p>
<p>就只好多用幾個 byte 啊，至於要用幾個 byte 才夠，大家的意見就不太一樣了。</p>
<p>舉例來說，在 Java 裡面，對於整數就有分成 Byte、Short、Integer、Long 四種資料型態，名稱不重要，重要的是 Java 規定 Byte 型態整數佔 1 Byte、Short 佔 2 Bytes、Integer 佔 4 Bytes、Long 佔 8 Bytes。</p>
<h1 id="整數儲存方式">整數儲存方式</h1>
<p>以 Byte 這個整數型態來舉例，儲存 <code>1</code> 這個正整數就是先轉成二進制，也就是 <code>0000 0001</code> 來存進 Byte 的八位元空間，大概可以表達成這樣：</p>
<blockquote>
<p>|0|0|0|0|0|0|0|1|</p>
</blockquote>
<p>八個位元，剛好一個位元存一個二進位數字。接著就可以來考慮負整數該怎麼辦了。</p>
<p>一般來說，不論是 Byte、Short、Integer 還是 Long，都是用最左邊的那一個位元來儲存正負號，<code>0</code> 是正號，<code>1</code> 是負號。所以如果是 <code>-1</code> 就要表達成這樣：</p>
<blockquote>
<p>|1|0|0|0|0|0|0|1|</p>
</blockquote>
<h1 id="1s-補數">1&rsquo;s 補數</h1>
<p>但是，這樣表達會有另外一個問題。</p>
<p>用最左邊的位元來儲存正負號，所以實際上八位元的空間只能儲存 2<!-- raw HTML omitted -->15<!-- raw HTML omitted --> 種狀況，而我們現在已經考慮到負整數，所以範圍就會變成 -2<!-- raw HTML omitted -->15<!-- raw HTML omitted -->~2<!-- raw HTML omitted -->15<!-- raw HTML omitted -->-1 這個範圍，那個扣掉的 1 是因為通常都把 <code>0</code> 算在正整數這邊，所以正整數的那邊就要扣掉 1。</p>
<p>這邊就產生一個問題，照前面的邏輯，<code>0</code> 換成八位元的二進制應該表達為 <code>0000 0000</code>，那 <code>1000 0000</code> 豈不是 <code>-0</code>？？</p>
<p>有人想到解決的辦法，就是取補數。</p>
<p>補數是什麼呢？</p>
<p>我覺得比較簡單的講法就是兩個加起來會剛好開始進位的數字，互相之間就是補數，譬如在十進制中 <code>1</code> 跟 <code>9</code> 互為補數、<code>23</code> 跟 <code>77</code> 互為補數這樣。</p>
<p>但是電腦是二進制啊，二進制補數怎麼算？二進制補數最簡單了，就是把 <code>0</code> 跟 <code>1</code> 通通反過來就好，譬如 <code>1001</code> 翻成 <code>0110</code> 就變成補數啦，不信可以自己加加看是不是剛好會進位。</p>
<p>然後我們就可以利用補數來表達負整數的部分，所以像是 <code>0110</code> 換算成十進制是 <code>6</code>，而 <code>-6</code> 就利用補數法表達為 <code>1001</code>，剛好連最左邊正負號的欄位都同時翻轉成正確的正負號，是不是很方便呢？</p>
<p>這個方法就被稱作 1&rsquo;s 補數法，但要注意，是對二進制取補數來表達十進制的負整數，而不是對十進制取補數。</p>
<h1 id="2s-補數">2&rsquo;s 補數</h1>
<p>但是仔細想想，這樣還是沒有解決 <code>-0</code>，的問題啊，只是原本 <code>-0</code> 表達成 <code>1000</code>，現在 <code>0</code> 變成用 <code>1111</code> 來表達而已啊？</p>
<p>所以為了徹底解決這個問題，於是就有了所謂的 2&rsquo;s 補數法來彌補這個問題。</p>
<p>2&rsquo;s 補數法就是針對 1&rsquo;s 補數法會從 <code>-0</code> 開始排列而做的調整，原理就是利用 1&rsquo;s 補數法將正整數的二進制取補數變成負整數的二進制後，對二進制加一來代表原本 1&rsquo;s 補數法代表的十進制數字。</p>
<p>一樣用十進制的 <code>6</code> 來當例子，十進制的 <code>6</code> 換成二進制變成 <code>0110</code>，而 <code>-6</code> 就是取 1&rsquo;s 補數變成 <code>1001</code>，然後對 <code>1001</code> 加一，也就是 <code>1010</code> 才代表原本 1&rsquo;s 補數所代表的 <code>-6</code>。</p>
<p>如果我們看四個位元的整數組合，可以表列如下，讓大家直觀明白 2&rsquo;s 補數法的對應關係。</p>
<table>
<thead>
<tr>
<th style="text-align:center">一般十進制正整數</th>
<th style="text-align:center">對應二進制</th>
<th style="text-align:center">1&rsquo;s補數法</th>
<th style="text-align:center">2&rsquo;s補數法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0000</td>
<td style="text-align:center">+0</td>
<td style="text-align:center">+0</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0001</td>
<td style="text-align:center">+1</td>
<td style="text-align:center">+1</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">0010</td>
<td style="text-align:center">+2</td>
<td style="text-align:center">+2</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">0011</td>
<td style="text-align:center">+3</td>
<td style="text-align:center">+3</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">0100</td>
<td style="text-align:center">+4</td>
<td style="text-align:center">+4</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">0101</td>
<td style="text-align:center">+5</td>
<td style="text-align:center">+5</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">0110</td>
<td style="text-align:center">+6</td>
<td style="text-align:center">+6</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center">0111</td>
<td style="text-align:center">+7</td>
<td style="text-align:center">+7</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center">1000</td>
<td style="text-align:center">-7</td>
<td style="text-align:center">-8</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center">1001</td>
<td style="text-align:center">-6</td>
<td style="text-align:center">-7</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center">1010</td>
<td style="text-align:center">-5</td>
<td style="text-align:center">-6</td>
</tr>
<tr>
<td style="text-align:center">11</td>
<td style="text-align:center">1011</td>
<td style="text-align:center">-4</td>
<td style="text-align:center">-5</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center">1100</td>
<td style="text-align:center">-3</td>
<td style="text-align:center">-4</td>
</tr>
<tr>
<td style="text-align:center">13</td>
<td style="text-align:center">1101</td>
<td style="text-align:center">-2</td>
<td style="text-align:center">-3</td>
</tr>
<tr>
<td style="text-align:center">14</td>
<td style="text-align:center">1110</td>
<td style="text-align:center">-1</td>
<td style="text-align:center">-2</td>
</tr>
<tr>
<td style="text-align:center">15</td>
<td style="text-align:center">1111</td>
<td style="text-align:center">-0</td>
<td style="text-align:center">-1</td>
</tr>
</tbody>
</table>
<p>所以 2&rsquo;s 補數法其實只是針對 1&rsquo;s 補數法的負整數部分調整其對應的十進制數字。</p>
<h1 id="整數溢位-integer-overflow">整數溢位 Integer Overflow</h1>
<p>終於要講到溢位了，yeah~</p>
<p>所謂整數溢位就是超過整數資料型態能儲存的範圍，例如剛才提的例子是用 4bits 來儲存整數，所以有 2<!-- raw HTML omitted -->4<!-- raw HTML omitted --> 也就是 16 種狀況，對應到利用 2&rsquo;s 補數法調整過的十進制整數範圍就是 -2<!-- raw HTML omitted -->3<!-- raw HTML omitted -->~2<!-- raw HTML omitted -->3<!-- raw HTML omitted -->-1，也就是 -8~+7。</p>
<p>那如果我利用這樣 4bits 的整數變數儲存正整數 <code>7</code>，但是變數在參與運算的時候不小心又加了一怎麼辦？這就會超出這個整數變數能儲存的範圍，那實際這個變數裡面的整數會怎麼樣？會變成 <code>-8</code>。</p>
<p>為什麼？我們來算算看。</p>
<p><code>+7</code> 對應的二進制是 <code>0111</code>，不小心再加了一會變多少？用二進制運算就是 <code>1000</code>。然後讓我們看一下上面的表格，<code>1000</code> 對應的 2&rsquo;s 補數法那格是多少？就是 <code>-8</code>。</p>
<p>反過來說，<code>-8</code> 對應的二進制是 <code>1000</code>，不小心又多減了一，<code>1000</code> 減一就變成 <code>0111</code>，那 <code>0111</code> 對應的十進制數字是多少？就是 <code>+7</code>。</p>
<p>其實整數溢位會正反循環的道理就在這邊，不知道這樣講我十年後看不看得懂&hellip;&hellip;orz</p>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">Last modified on 2017-10-01</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://idontwannarock.github.io/tech_blog/2017/10/markdown_syntax/">
			Next<br>Markdown 語法
                </a>
                
                
                
                <a class="older-posts" href="https://idontwannarock.github.io/tech_blog/2017/09/twitter_clone/">
			Previous<br>4th Practice: Twitter Clone
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                
<div class="comments">
    <vue-disqus shortname="howard-tech-blog"></vue-disqus>
</div>
<noscript><noscript>Please activate JavaScript to view comments.</noscript></noscript>
<a href="https://disqus.com/" class="dsq-brlink">Comments powered by <span class="logo-disqus">Disqus</span></a>











            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	This website by Howard Wang is licensed under a Creative Common Attribution-ShareAlike 4.0 International License.
	
</div>
            </div>
    
    <script src="https://idontwannarock.github.io/tech_blog/js/journal.js"></script>
    </body>
</html>
